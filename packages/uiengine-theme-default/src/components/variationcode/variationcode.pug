mixin variationcode(variation, active)
  - const id = `${h.dasherize(variation.id)}-code`
  - const classes = active ? 'variation__section--active' : null
  .variationcode(id=id class=classes)&attributes(attributes)
    .wrap.wrap--content
      .variationcode__sections
        if variation.raw
          - const blockId = `${h.dasherize(variation.id)}-raw`
          section.variationcode__section.variationcode__section--expanded(id=blockId)
            header.variationcode__header(role="button" data-section-target=blockId)
              h3= h.t('variation.raw')
              +icon('caret-down-double').variationcode__expandicon
            .variationcode__content
              pre.variationcode__raw.hljs(lang=variation.extension)
                != h.decorateRaw(variation.raw, variation.extension)

        if variation.context
          - const blockId = `${h.dasherize(variation.id)}-context`
          section.variationcode__section.variationcode__section--expanded(id=blockId)
            header.variationcode__header(role="button" data-section-target=blockId)
              h3= h.t('variation.context')
              +icon('caret-down-double').variationcode__expandicon
            .variationcode__content
              pre.variationcode__context.hljs(lang="json")
                != h.decorateContext(variation.context)

        if variation.rendered
          - const blockId = `${h.dasherize(variation.id)}-rendered`
          section.variationcode__section(id=blockId)
            header.variationcode__header(role="button" data-section-target=blockId)
              h3= h.t('variation.rendered')
              +icon('caret-down-double').variationcode__expandicon
            .variationcode__content
              pre.variationcode__rendered.hljs(lang="html")
                != h.decorateRendered(variation.rendered)
