include /icon/icon.pug
include /permalink/permalink.pug
include /variationheader/variationheader.pug
include /variationcode/variationcode.pug
include /variationpreview/variationpreview.pug

mixin variation(variation)
  - const varId = h.dasherize(variation.id)
  article.variation(id=varId)
    +variationheader(variation)

    .wrap.wrap--content
      if variation.content
        .variation__content
          != variation.content

      ul.variation__links
        li
          +permalink(h.t('variation.copy_permalink'), `#${varId}`, 'globe').variation__link
        li
          a.variation__link(href=h.variationPreviewPath(variation.id) target=varId)
            +icon('open-in-window')
            = h.t('variation.open_in_window')

    if variation.raw || variation.context || variation.rendered
      .variation__sections
        if variation.rendered
          +variationpreview(variation, true).variation__section

        if variation.raw || variation.context || variation.rendered
          +variationcode(variation, !variation.rendered).variation__section
