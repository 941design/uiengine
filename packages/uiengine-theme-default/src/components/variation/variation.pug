include /icon/icon.pug
include /permalink/permalink.pug
include /variationHeader/variationHeader.pug
include /variationCode/variationCode.pug
include /variationPreview/variationPreview.pug

mixin variation(variation)
  - const varId = h.dasherize(variation.id)
  article.variation(id=varId)
    +variationHeader(variation)

    .wrap.wrap--content
      if variation.content
        .variation__content
          != variation.content

      ul.variation__links
        li
          +permalink(h.t('Variationslink kopieren'), `#${varId}`, '3px--globe').variation__link
        li
          a.variation__link(href=h.variationPreviewPath(variation.id) target=varId)
            +icon('3px--open-in-window')
            = h.t('Variation in separatem Fenster Ã¶ffnen')

    if variation.raw || variation.context || variation.rendered
      .variation__sections
        if variation.rendered
          +variationPreview(variation, true)

        if variation.raw || variation.context || variation.rendered
          +variationCode(variation, !variation.rendered)
